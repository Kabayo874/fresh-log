<div class="text-center mt-5">
  <%= image_tag group.image, size: "150x150", class: "rounded rounded-3 mb-3" %>
  <h5><%= group.name %></h5>
</div>
<div class="mt-5">
  <p><%= group.description %></p>
</div>

<div class="mb-5">
  <div><%= link_to "投稿一覧", group_path(group) %></div>
  <div>
    <% if group.owner_user == current_user %>
      <div><%= link_to "グループ編集", edit_group_path(group) %></div>
      <div class="mt-3">
        <%= link_to "グループ解散", group_path(group), method: :delete, data: { confirm: "グループの投稿も削除されます。本当にグループを解散しますか？" }, class: "btn btn-danger btn-sm" %>
      </div>
    <% end %>
  </div>
</div>

<div>
  <div class="mb-5">
    <%= form_with url: group_group_members_path(group), method: :post do |f| %>
      <div>
        <%= f.label :email, "メールアドレスでメンバー招待" %>
      </div>
      <div>
        <%= f.text_field :email %>
      </div>
      <div>
        <%= f.submit "招待", class: "btn btn-secondary btn-sm mt-1" %>
      </div>
    <% end %>
  </div>

  <!-- メンバー一覧 -->
  <div class="d-flex flex-column">
    <% group.group_members.each do |member| %>
      <div class="d-flex align-items-center mb-3">
        <%= link_to user_path(member.user.id), class: "d-flex align-items-center text-decoration-none" do %>
          <%= image_tag member.user.get_profile_image(50, 50),
            style: "width: 50px; height: 50px; object-fit: cover;",
            class: "rounded-circle me-3" %>
          <span class="me-2 text-dark fw-bold"><%= member.user.name %></span>

          <% if member.user.id == group.owner_id %>
            <span class="badge bg-primary">管理者</span>
          <% end %>
        <% end %>
      </div>
    <% end %>
  </div>

</div>